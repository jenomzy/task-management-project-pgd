<!DOCTYPE html>
<html lang="en">

<head>
  <title>{{title}}</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel='stylesheet' href='/stylesheets/style.css' />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/js/adminlte.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/css/adminlte.min.css">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <link href='https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.css' rel='stylesheet' />
  <script src='https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.js'></script>
</head>

<body>
  <div class="wrapper">
    {{#if user}}
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <!-- Company name -->
      <a class="navbar-brand" href="/">Team Management</a>

      <!-- Toggler/collapsibe Button -->
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Navbar links -->
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link {{#eq activeTab 'dashboard'}}active{{/eq}}" href="/">Dashboard</a>
          </li>
          {{#neq user.position "Manager"}}
          <li class="nav-item">
            <a class="nav-link {{#eq activeTab 'tasks'}}active{{/eq}}" href="/usertasks">Projects</a>
          </li>
          {{/neq}}
          {{#eq user.position "Manager"}}
          <li class="nav-item">
            <a class="nav-link {{#eq activeTab 'manageusers'}}active{{/eq}}" href="/usermanage">Manage Members</a>
          </li>
          <li class="nav-item">
            <a class="nav-link {{#eq activeTab 'manageteams'}}active{{/eq}}" href="/teammanage">Manage Teams</a>
          </li>
          <li class="nav-item">
            <a class="nav-link {{#eq activeTab 'managetasks'}}active{{/eq}}" href="/tasksmanage">Task Management</a>
          </li>
          {{/eq}}
          <li class="nav-item">
            <a class="nav-link {{#eq activeTab 'forum'}}active{{/eq}}" href="/forum">Forum</a>
          </li>
          <li class="nav-item">
            <a class="nav-link {{#eq activeTab 'profile'}}active{{/eq}}" href="/profile">Profile</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/logout">Logout</a>
          </li>
        </ul>
      </div>
    </nav>
    <!-- Navbar End -->
    {{/if}}



    {{!-- To Be Deleted --}}
    {{#if user}}
    {{!-- Navigation Content --}}
    <ul class="nav nav-tabs nav-justified">
      <li class="nav-item">
        <a class="nav-link {{#eq activeTab 'dashboard'}}active{{/eq}}" href="/">Dashboard</a>
      </li>
      <li class="nav-item">
        <a class="nav-link {{#eq activeTab 'tasks'}}active{{/eq}}" href="/usertasks">Projects</a>
      </li>
      <li class="nav-item">
        <a class="nav-link {{#eq activeTab 'manageusers'}}active{{/eq}}" href="/usermanage">Manage Members</a>
      </li>
      <li class="nav-item">
        <a class="nav-link {{#eq activeTab 'manageteams'}}active{{/eq}}" href="/teammanage">Manage Teams</a>
      </li>
      <li class="nav-item">
        <a class="nav-link {{#eq activeTab 'managetasks'}}active{{/eq}}" href="/tasksmanage">Task Management</a>
      </li>
      <li class="nav-item">
        <a class="nav-link {{#eq activeTab 'forum'}}active{{/eq}}" href="/forum">Forum</a>
      </li>
      <li class="nav-item">
        <a class="nav-link {{#eq activeTab 'profile'}}active{{/eq}}" href="/profile">Profile</a>
      </li>
      <li class="nav-item">
        <a class="nav-link {{#eq activeTab 'db'}}active{{/eq}}" href="/db">DB list</a>
      </li>
    </ul>
    {{!-- Navigation Content End --}}
    {{/if}}
    {{!-- End Delete --}}



    <div class="w3-container">
      {{#if message.success}}
      <br>
      <div id="successAlert" class="alert alert-success" role="alert">{{message.success}}</div>
      {{/if}}

      {{#if message.error}}
      <br>
      <div id="errorAlert" class="alert alert-danger" role="alert">{{message.error}}</div>
      {{/if}}
      <br>
      {{{body}}}
    </div>
  </div>

  <script>
    // Function to hide flash messages after a duration
    function hideFlashMessages() {
      // Select the flash message elements
      var successAlert = document.getElementById('successAlert');
      var errorAlert = document.getElementById('errorAlert');

      // Set a timeout to hide the success alert after 5 seconds (5000 milliseconds)
      if (successAlert) {
        setTimeout(function () {
          successAlert.style.display = 'fade';
        }, 5000);
      }

      // Set a timeout to hide the error alert after 5 seconds (5000 milliseconds)
      if (errorAlert) {
        setTimeout(function () {
          errorAlert.style.display = 'fade';
        }, 5000);
      }
    }

    // Call the hideFlashMessages function when the page loads
    window.onload = hideFlashMessages;
  </script>
</body>

</html>